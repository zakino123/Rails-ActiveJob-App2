<p id="notice"><%= notice %></p>

<h1>Job Statuses</h1>

<button type="button" id="reload" onclick="reload()">reload</button>
<button type="button" id="calljob" onclick="calljob()">call job</button>
<%# <button type="button" id="calljob_synchronized">call job synchronized</button> %>

<table>
  <thead>
    <tr>
      <th>Status</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @job_statuses.each do |job_status| %>
      <tr>
        <td><%= job_status.status %></td>
        <td><%= link_to 'Show', job_status %></td>
        <td><%= link_to 'Edit', edit_job_status_path(job_status) %></td>
        <td><%= link_to 'Destroy', job_status, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Job Status', new_job_status_path %>

<script>
  const reload = function() {
    window.location.reload();
    console.log("リロード完了")
  }

  const calljob = function() {
    fetch('/home/call_job', {
      method: 'GET'
    });
    console.log("calljob完了")
  }

  // var reload = document.getElementById('calljob_synchronized');
  // reload.addEventListener('click', function() {
  //   // fetch()メソッドは、「非同期通信という方法で、サーバ上にある欲しいデータを取得できる」
  //   fetch('/home/call_job_synchronized', {
  //     method: 'GET'
  //   });
  // });
</script>
